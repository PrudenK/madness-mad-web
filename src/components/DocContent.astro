<section class="doc-hero">
    <div class="doc-hero-inner">
        <h1 class="doc-h1">Documentación</h1>
        <p class="doc-lead">
            Guía de uso de MadnessMad: interfaz, controles, algoritmos, métricas, matrices e import/export.
        </p>
    </div>
</section>

<article class="doc-article">
    <section id="ui" class="doc-section">
        <h2 class="doc-h2">Interfaz</h2>



        <section id="ui-general" class="doc-subsection">
            <h3 class="doc-h3">General</h3>
            <div class="doc-callout">
                <div class="doc-callout-text">La interfaz se compone de 4 secciones:</div>
                <ul class="doc-ul">
                    <li><strong>TopBar</strong>: selección de algoritmos, ejemplos y opciones generales.</li>
                    <li><strong>ToolBar</strong>: ejecución de algoritmos, matrices y opciones del grafo.</li>
                    <li><strong>Panel de información</strong>: muestra la salida y métricas al ejecutar algoritmos.</li>
                    <li><strong>Lienzo (canvas)</strong>: zona principal donde se modeliza el grafo.</li>
                </ul>
            </div>
        </section>


        <section id="ui-vertices" class="doc-subsection">
            <h3 class="doc-h3">Vértices</h3>
            <ul class="doc-ul">
                <li>Crear con <span class="kbd">V</span> o con <span class="kbd">click izquierdo</span> (en modo legacy).</li>
                <li>Nombre, tamaño, color y estilo son editables.</li>
            </ul>
        </section>

        <section id="ui-aristas" class="doc-subsection">
            <h3 class="doc-h3">Aristas</h3>
            <ul class="doc-ul">
                <li>Crear arrastrando desde un vértice a otro con click izquierdo.</li>
                <li>Peso, nombre, color, curvatura, dirección y estilos son editables.</li>
                <li>Alternar texto de arista con <span class="kbd">E</span> (nombre, peso, ambos, ninguno).</li>
            </ul>
        </section>


        <section id="ui-bucles" class="doc-subsection">
            <h3 class="doc-h3">Bucles</h3>
            <ul class="doc-ul">
                <li>Tecla <span class="kbd">B</span> en un vértice seleccionado.</li>
                <li>Peso, tamaño, nombre, color, ángulo y estilo son editables.</li>
            </ul>
        </section>
    </section>

    <section id="controls" class="doc-section">
        <h2 class="doc-h2">Controles del grafo</h2>


        <p class="doc-p">
            El modelizador dispone de dos modos de control: <strong>nativo</strong> y <strong>legacy</strong>. Puedes alternar entre ellos desde la barra de acciones.<br>
            El modo <strong>legacy</strong> está pensado para un flujo más orientado al ratón: ofrece menos atajos y separa la edición en <strong>modo nodo</strong> y <strong>modo arista</strong>.<br>
            El modo <strong>nativo</strong> prioriza la productividad, con muchos atajos de teclado para modelizar grafos con mayor rapidez.
        </p>


        <div class="controls-tabs" data-controls>
            <div class="controls-tabrow" role="tablist" aria-label="Controles">
                <button class="controls-tab is-active" type="button" role="tab" aria-selected="true" data-tab="common">Común</button>
                <button class="controls-tab" type="button" role="tab" aria-selected="false" data-tab="native">Nativo</button>
                <button class="controls-tab" type="button" role="tab" aria-selected="false" data-tab="legacy">Legacy</button>
            </div>

            <div class="controls-panel is-active" role="tabpanel" data-panel="common">


                <h3 class="doc-h3">Controles generales</h3>

                <div class="controls-block">
                    <div class="controls-subtitle">• Atajos de teclado</div>
                    <div class="shortcut-list">
                        <div class="shortcut-row"><div class="shortcut-key">D o BackSpace</div><div class="shortcut-action">Eliminar elemento</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">S</div><div class="shortcut-action">Alternar estilo de arista</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">B</div><div class="shortcut-action">Añadir bucle</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">R</div><div class="shortcut-action">Renombrar elemento</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">W</div><div class="shortcut-action">Cambiar peso de arista(s)</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">C</div><div class="shortcut-action">Cambiar color</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">A</div><div class="shortcut-action">Cambiar dirección arista</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">E</div><div class="shortcut-action">Mostrar nombre aristas</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">M</div><div class="shortcut-action">Abrir el menú de matrices</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">F</div><div class="shortcut-action">Alternar estilo de vértices</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + Z</div><div class="shortcut-action">Deshacer última acción</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + Y</div><div class="shortcut-action">Rehacer última acción</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl +/-</div><div class="shortcut-action">Cambiar tamaño vértice</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + A</div><div class="shortcut-action">Seleccionar todo</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + Shift + A</div><div class="shortcut-action">Eliminar selección</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + C</div><div class="shortcut-action">Copiar</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + V</div><div class="shortcut-action">Pegar</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + X</div><div class="shortcut-action">Cortar</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + D</div><div class="shortcut-action">Duplicar</div></div>
                    </div>

                    <p class="controls-note">
                        En Ctrl + C, V, D y X, si se pulsa Shift la acción se realiza ignorando el formato (colores y estilos).
                    </p>
                </div>

                <div class="controls-block">
                    <div class="controls-subtitle">• Atajos de teclado de la barra de herramientas</div>
                    <div class="shortcut-list">
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 1</div><div class="shortcut-action">Abrir</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 2</div><div class="shortcut-action">Guardar</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 3</div><div class="shortcut-action">Ejecutar</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 4</div><div class="shortcut-action">Por pasos</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 5</div><div class="shortcut-action">Dirigido / no dirigido</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 6</div><div class="shortcut-action">Con / sin pesos</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 7</div><div class="shortcut-action">Matriz</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 8</div><div class="shortcut-action">Borrar</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Alt + 9</div><div class="shortcut-action">Legacy / nativo</div></div>
                    </div>
                </div>

                <div class="controls-block">
                    <div class="controls-subtitle">• Navegación por el grafo</div>
                    <div class="shortcut-list">
                        <div class="shortcut-row"><div class="shortcut-key">Click der + arrastrar</div><div class="shortcut-action">Desplazamiento</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + 0</div><div class="shortcut-action">Restaurar zoom</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + scroll</div><div class="shortcut-action">Zoom in / out</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Scroll</div><div class="shortcut-action">Desplazamiento vertical</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Shift + Scroll</div><div class="shortcut-action">Desplazamiento horizontal</div></div>
                    </div>
                </div>

                <div class="controls-block">
                    <div class="controls-subtitle">• Selección y menús</div>
                    <div class="shortcut-list">
                        <div class="shortcut-row"><div class="shortcut-key">Click der</div><div class="shortcut-action">Abrir menú</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Click izq</div><div class="shortcut-action">Seleccionar / Deseleccionar</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Shift + click izq</div><div class="shortcut-action">Añadir a selección</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Shift + click izq + arrastrar</div><div class="shortcut-action">Rectángulo de selección</div></div>
                    </div>
                </div>

                <div class="controls-block">
                    <div class="controls-subtitle">• Aristas</div>
                    <div class="shortcut-list">
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + click izq + arrastrar</div><div class="shortcut-action">Ajustar curvatura de la arista (desde el centro)</div></div>
                    </div>
                </div>

                <div class="controls-block">
                    <div class="controls-subtitle">• Bucles</div>
                    <div class="shortcut-list">
                        <div class="shortcut-row"><div class="shortcut-key">Ctrl + click izq + arrastrar</div><div class="shortcut-action">Ajustar tamaño del bucle (desde la etiqueta)</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Shift + click izq + arrastrar</div><div class="shortcut-action">Ajustar ángulo del bucle (desde la etiqueta)</div></div>
                    </div>
                </div>
            </div>

            <div class="controls-panel" role="tabpanel" data-panel="native">
                <h3 class="doc-h3">Controles modo nativo</h3>

                <div class="shortcut-list shortcut-list-wide">
                    <div class="shortcut-row"><div class="shortcut-key">V</div><div class="shortcut-action">Crear vértice</div></div>
                    <div class="shortcut-row"><div class="shortcut-key">Arrastrar (V → V)</div><div class="shortcut-action">Crear arista</div></div>
                    <div class="shortcut-row"><div class="shortcut-key">Ctrl + click izq + arrastrar</div><div class="shortcut-action">Mover vértice</div></div>
                    <div class="shortcut-row"><div class="shortcut-key">B (sobre un vértice)</div><div class="shortcut-action">Crear bucle</div></div>
                </div>

                <p class="controls-note">
                    Con Ctrl + Alt + Click izquierdo + arrastrar sobre un vértice con varios seleccionados los mueve todos.
                </p>
            </div>

            <div class="controls-panel" role="tabpanel" data-panel="legacy">
                <h3 class="doc-h3">Controles modo legacy</h3>

                <div class="shortcut-list">
                    <div class="shortcut-row"><div class="shortcut-key">Espacio</div><div class="shortcut-action">Alternar modo nodo / arista</div></div>
                </div>

                <div class="controls-subtabs" role="tablist" aria-label="Legacy">
                    <button class="controls-subtab is-active" type="button" role="tab" aria-selected="true" data-subtab="node">Modo nodo</button>
                    <button class="controls-subtab" type="button" role="tab" aria-selected="false" data-subtab="edge">Modo arista</button>
                </div>

                <div class="controls-subpanel is-active" data-subpanel="node">
                    <div class="shortcut-list">
                        <div class="shortcut-row"><div class="shortcut-key">Click izq + arrastrar</div><div class="shortcut-action">Mover vértice</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Click izq (en el vacío)</div><div class="shortcut-action">Crear vértice (si no hay)</div></div>
                    </div>

                    <p class="controls-note">
                        Con Ctrl + Alt + Click izquierdo + arrastrar sobre un vértice con varios seleccionados los mueve todos.
                    </p>
                </div>

                <div class="controls-subpanel" data-subpanel="edge">
                    <div class="shortcut-list">
                        <div class="shortcut-row"><div class="shortcut-key">Arrastrar (V → V)</div><div class="shortcut-action">Crear arista</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Click izq (sobre vértice)</div><div class="shortcut-action">Crear bucle si no tiene</div></div>
                        <div class="shortcut-row"><div class="shortcut-key">Click izq (en el vacío)</div><div class="shortcut-action">Deseleccionar</div></div>
                    </div>
                </div>
            </div>
        </div>

        <script is:inline>
            (() => {
                const root = document.querySelector('[data-controls]')
                if (!root) return

                const mainTabs = Array.from(root.querySelectorAll('.controls-tab'))
                const mainPanels = Array.from(root.querySelectorAll('.controls-panel'))

                const setMain = (key) => {
                    mainTabs.forEach(b => {
                        const on = b.dataset.tab === key
                        b.classList.toggle('is-active', on)
                        b.setAttribute('aria-selected', on ? 'true' : 'false')
                    })
                    mainPanels.forEach(p => p.classList.toggle('is-active', p.dataset.panel === key))
                }

                mainTabs.forEach(b => b.addEventListener('click', () => setMain(b.dataset.tab)))

                const subTabs = Array.from(root.querySelectorAll('.controls-subtab'))
                const subPanels = Array.from(root.querySelectorAll('.controls-subpanel'))

                const setSub = (key) => {
                    subTabs.forEach(b => {
                        const on = b.dataset.subtab === key
                        b.classList.toggle('is-active', on)
                        b.setAttribute('aria-selected', on ? 'true' : 'false')
                    })
                    subPanels.forEach(p => p.classList.toggle('is-active', p.dataset.subpanel === key))
                }

                subTabs.forEach(b => b.addEventListener('click', () => setSub(b.dataset.subtab)))
            })()
        </script>
    </section>


    <section id="algorithms" class="doc-section">
        <h2 class="doc-h2">Algoritmos</h2>
        <p class="doc-p">
            Se seleccionan desde el menú <span class="doc-pill">Algoritmos</span>. La ejecución se realiza con <span class="doc-pill">Ejecutar</span>.
        </p>

        <section id="algorithms-list" class="doc-subsection">
            <h3 class="doc-h3">Implementados</h3>

            <div class="doc-table-wrap">
                <table class="doc-table">
                    <thead>
                    <tr>
                        <th>Algoritmo</th>
                        <th>Descripción</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr><td>BFS</td><td>Recorre por niveles desde un origen.</td></tr>
                    <tr><td>DFS</td><td>Recorre en profundidad antes de retroceder.</td></tr>
                    <tr><td>Dijkstra</td><td>Camino mínimo sin pesos negativos.</td></tr>
                    <tr><td>Bellman–Ford</td><td>Camino mínimo con pesos negativos y detección de ciclos negativos.</td></tr>
                    <tr><td>Kruskal</td><td>Árbol de expansión mínima en no dirigidos.</td></tr>
                    <tr><td>Edmonds 2</td><td>Emparejamiento máximo en grafos generales.</td></tr>
                    <tr><td>Hierholzer</td><td>Ciclo o camino euleriano.</td></tr>
                    <tr><td>Cartero Chino</td><td>Recorrido cerrado mínimo que pasa por todas las aristas.</td></tr>
                    <tr><td>Ford–Fulkerson</td><td>Flujo máximo en redes.</td></tr>
                    <tr><td>Hamilton bajo peso</td><td>Heurístico priorizando pesos bajos.</td></tr>
                    <tr><td>Hamilton mínimo peso</td><td>Fuerza bruta.</td></tr>
                    <tr><td>Hopcroft–Tarjan</td><td>Vértices y aristas de corte en no dirigidos.</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
    </section>

    <section id="social" class="doc-section">
        <h2 class="doc-h2">Algoritmos de redes sociales</h2>

        <p class="doc-p">
            Se seleccionan desde el menú <span class="doc-pill">Redes sociales</span>. La ejecución se realiza con <span class="doc-pill">Ejecutar</span>.
        </p>

        <div class="doc-table-wrap">
            <table class="doc-table">
                <thead>
                <tr>
                    <th>Métrica</th>
                    <th>Descripción</th>
                </tr>
                </thead>
                <tbody>
                <tr><td>Centralidad de grado</td><td>Número de conexiones directas.</td></tr>
                <tr><td>Intermediación</td><td>Caminos mínimos que pasan por el vértice.</td></tr>
                <tr><td>Cercanía</td><td>Distancia mínima media al resto.</td></tr>
                <tr><td>Excentricidad</td><td>Mayor distancia mínima a cualquier otro.</td></tr>
                <tr><td>Clustering global</td><td>Agrupamiento global del grafo.</td></tr>
                <tr><td>Clustering local</td><td>Agrupamiento entre vecinos.</td></tr>
                <tr><td>Clustering medio</td><td>Media del clustering local.</td></tr>
                <tr><td>Alcance medio</td><td>Distancia media entre pares alcanzables.</td></tr>
                <tr><td>Diámetro</td><td>Máxima distancia mínima entre pares.</td></tr>
                <tr><td>PageRank</td><td>Importancia basada en enlaces entrantes.</td></tr>
                </tbody>
            </table>
        </div>
    </section>

    <section id="matrices" class="doc-section">
        <h2 class="doc-h2">Matrices del grafo</h2>

        <p class="doc-p">
            Abre el menú de matrices desde <span class="doc-pill">Matriz</span> en la barra de herramientas o con la tecla
            <span class="doc-pill">M</span>. Desde ahí puedes alternar entre:
        </p>

        <ul class="doc-ul">
            <li>Matriz de adyacencia.</li>
            <li>Matriz de pesos.</li>
            <li>Matriz de incidencia.</li>
            <li>Matriz de acceso.</li>
        </ul>
    </section>



    <section id="io" class="doc-section">
        <h2 class="doc-h2">Archivo</h2>

        <div class="doc-grid-2 doc-io-grid">
            <div class="doc-panel">
                <div class="doc-panel-title">Importaciones</div>
                <ul class="doc-ul">
                    <li>A mano desde el programa usando matrices.</li>
                    <li>Usando matrices (adyacencia, pesos e incidencia) en .csv.</li>
                    <li>Formato nativo de MadnessMad (.json).</li>
                    <li>Compatible con SWGraphs (.xml).</li>
                </ul>
            </div>

            <div class="doc-panel">
                <div class="doc-panel-title">Exportaciones</div>
                <ul class="doc-ul">
                    <li>Usando matrices (adyacencia, pesos e incidencia) en .csv.</li>
                    <li>Formato nativo de MadnessMad (.json).</li>
                    <li>Compatible con SWGraphs (.xml).</li>
                </ul>
            </div>


        </div>

        <div class="doc-callout">
            <div class="doc-callout-title">Errores de importación</div>
            <div class="doc-callout-text">
                Si hay un error, la app mostrará un código. Según el tipo, el motivo es:
            </div>
        </div>

        <div class="doc-table-wrap">
            <table class="doc-table">
                <thead>
                <tr>
                    <th>Tipo</th>
                    <th>Motivo</th>
                </tr>
                </thead>
                <tbody>
                <tr><td>InvalidJsonStructure</td><td>La estructura del json no es correcta</td></tr>
                <tr><td>InvalidJsonVertex</td><td>Error en el formato de los vértices en el json</td></tr>
                <tr><td>InvalidJsonEdge</td><td>Error en el formato de las aristas en el json</td></tr>
                <tr><td>InvalidCSVFormat</td><td>La estructura del csv es incorrecta</td></tr>
                <tr><td>InvalidCSVIncidenceColumn</td><td>Error en la definición de las aristas en la matriz de incidencia</td></tr>
                <tr><td>InvalidXMLFormat</td><td>Error en el formato del XML</td></tr>
                </tbody>
            </table>
        </div>
    </section>




    <section id="platform" class="doc-section">
        <h2 class="doc-h2">Plataformas soportadas</h2>

        <p class="doc-p">
            MadnessMad es una aplicación de escritorio <strong>multiplataforma</strong>. Se distribuye con binarios propios por sistema operativo, por lo que
            <strong>no necesitas tener Java instalado</strong>.
        </p>

        <ul class="doc-ul">
            <li><strong>Linux</strong>: paquete <span class="doc-pill">.deb</span>.</li>
            <li><strong>Windows 10 y 11</strong>: instalador <span class="doc-pill">.msi</span>.</li>
            <li><strong>macOS</strong>: imagen <span class="doc-pill">.dmg</span>.</li>
        </ul>
    </section>


</article>
