---
const BASE = import.meta.env.BASE_URL
---

<header class="topbar">
    <nav class="topbar-inner">
        <a class="brand" href={BASE}>
            <img class="brand-logo" src={`${BASE}logo_mm_sin_fondo.png`} alt="MadnessMad" />
            <span class="brand-text">MadnessMad</span>
        </a>

        <button class="menu-btn" type="button" aria-label="Abrir menú" aria-expanded="false">
            ☰
        </button>

        <div class="links" data-links>
            <a href={`${BASE}doc`}>Documentación</a>
            <a href={`${BASE}#demo`}>Ejemplos</a>
            <a href={`${BASE}#contact`}>Contacto</a>
        </div>
    </nav>

    <div class="mobile-menu" data-mobile aria-hidden="true">
        <a href={`${BASE}doc`}>Documentación</a>
        <a href={`${BASE}#demo`}>Ejemplos</a>
        <a href={`${BASE}#contact`}>Contacto</a>
    </div>

    <script is:inline>
        (() => {
            const btn = document.querySelector('.menu-btn')
            const menu = document.querySelector('[data-mobile]')
            if (!btn || !menu) return

            const setOpen = (open) => {
                btn.setAttribute('aria-expanded', open ? 'true' : 'false')
                menu.classList.toggle('is-open', open)
                menu.setAttribute('aria-hidden', open ? 'false' : 'true')
            }

            btn.addEventListener('click', () => {
                const open = btn.getAttribute('aria-expanded') === 'true'
                setOpen(!open)
            })

            window.addEventListener('resize', () => {
                if (window.matchMedia('(min-width: 820px)').matches) setOpen(false)
            })
        })()
    </script>
</header>
